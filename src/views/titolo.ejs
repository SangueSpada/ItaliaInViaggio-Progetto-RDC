<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="../personal_dist/style.css" />
    <script type="text/javascript" src="../function.js"></script>

    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../personal_dist/our.css">
    <link href="https://fonts.googleapis.com/css?family=Georgia" rel="stylesheet">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
    <script src="//code.jquery.com/jquery-3.6.0.min.js"></script>

    <script src="https://unpkg.com/scrollreveal"></script>
    
    <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">


    <title>Offerta cercata</title>
    <style>
        #myImg:hover {
            opacity: 0.7;
        }
        /* The Modal (background) */
        
        .modal {
            display: none;
            /* Hidden by default */
            position: fixed;
            /* Stay in place */
            z-index: 1;
            /* Sit on top */
            padding-top: 100px;
            /* Location of the box */
            left: 0;
            top: 0;
            width: 100%;
            /* Full width */
            height: 100%;
            /* Full height */
            overflow: auto;
            /* Enable scroll if needed */
            background-color: rgb(0, 0, 0);
            /* Fallback color */
            background-color: rgba(0, 0, 0, 0.9);
            /* Black w/ opacity */
        }
        /* Modal Content (image) */
        
        .modal-content {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 1000px;
        }
        /* Caption of Modal Image */
        
        #caption {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
            text-align: center;
            color: #ccc;
            padding: 10px 0;
            height: 150px;
        }
        /* Add Animation */
        
        .modal-content,
        #caption {
            animation-name: zoom;
            animation-duration: 0.6s;
        }
        
        @keyframes zoom {
            from {
                transform: scale(0.1)
            }
            to {
                transform: scale(1)
            }
        }
        /* The Close Button */
        
        .close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
        }
        
        .close:hover,
        .close:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }
        /* 100% Image Width on Smaller Screens */
        
        @media only screen and (max-width: 700px) {
            .modal-content {
                width: 100%;
            }
        }
    </style>
</head>

<body class="bg2">
    <%- include('navbar')%>
        <div style="padding: 40pt;"></div>

        <div class="container cont">


            <div class="row">
                    <h3 style="color:bisque; font-weight: bold;">Qua faremo un carosello di foto</h3>
                    <image class="img-fluid" id="myImg" width="100%" src="../media/yellow-floral-bushes-overlook-the-city.jpg" alt="<%=borgo.nome%>"> </image>
                    <div id="myModal" class="modal">
                        <span class="close">&times;</span>
                        <img class="modal-content" id="img01">
                        <div id="caption"></div>
                    </div>

            </div>
            <div class="row pt-2">
                <h3 style="color:bisque; font-weight: bold;"><%=borgo.nome%></h3>
                <h4 style="color: antiquewhite; font-style: italic;">
                    lat=<%=borgo.lat%> long=<%=borgo.long%>
                </h4>
            </div>
            <div style="padding: 40pt;"></div>
            <div class="row">
                <div class="col-lg-12 text-center">

                    <nav class="shadow container p-3 rounded-3" style="background-color: #e3f2fd;">
                        <form class="row" method="post" action="/borgo">
                            <div class="col-lg-12 mb-2" id="controls">
                              <!--<input type="text" class="active form-control" id="testo_ricerca" name="testo_ricerca" placeholder="Cerca per Hotel o per Città">-->
                                <select id="borgo" id="testo_ricerca" name="testo_ricerca" aria-placeholder="Scegli un borgo" class="form-control" onclick=tempo(this.value)>
                                    <optgroup id="Piemonte" label="Piemonte">
                                    </optgroup>
                                    <optgroup id="Valle D’Aosta" label="Valle D’Aosta">
                                    </optgroup>
                                    <optgroup id="Lazio" label="Lazio">
                                    </optgroup>
                                    <optgroup id="Liguria" label="Liguria">
                                    </optgroup>
                                    <optgroup id="Trentino A.A." label="Trentino A.A.">
                                    </optgroup>
                                    <optgroup id="Veneto" label="Veneto">
                                    </optgroup>
                                    <optgroup id="Friuli Venezia Giulia" label="Friuli Venezia Giulia">
                                    </optgroup>
                                    <optgroup id="Emilia Romagna" label="Emilia Romagna">
                                    </optgroup>
                                    <optgroup id="Toscana" label="Toscana">
                                    </optgroup>
                                    <optgroup id="Marche" label="Marche">
                                    </optgroup>
                                    <optgroup id="Umbria" label="Umbria">
                                    </optgroup>
                                    <optgroup id="Abruzzo" label="Abruzzo">
                                    </optgroup>
                                    <optgroup id="Campania" label="Campania">
                                    </optgroup>
                                    <optgroup id="Calabria" label="Calabria">
                                    </optgroup>
                                    <optgroup id="Sicilia" label="Sicilia">
                                    </optgroup>
                                </select>     
                             
                                <% var nome=[];var regione=[];var lats=[];var longs=[];%>

                                <% nomi.forEach(item=>
                                    {
                                    nome.push(item.nome);
                                    regione.push(item.regione);
                                    lats.push(item.lat);
                                    longs.push(item.long);       
                                    })
                                    
                                    %>
                                    <script>
                                        var n="<%=nome%>".split(',');
                                        var r="<%=regione%>".split(',');
                                        var la="<%=lats%>".split(',');
                                        var lo="<%=longs%>".split(',');
                                        for(var i=0;i<n.length;i++){
                                        //console.log(n+' '+r+' '+la+' '+lo);
                                        popola(n[i],r[i],la[i],lo[i]);
                                        }
                                    </script>
                                 
                     

                            </div>
                            <div class="col-lg-3 mt-2 d-flex justify-content-center">
                                <label class="active me-1 mt-1" for="dateStandard" >Check-in:</label>
                                <input type="date" id="CheckInDate" onchange="checkin_fun();" name="CheckIn" value="<%= search[1] || '' %>" required>
                            </div>
                            <div class="col-lg-3 mt-2 d-flex justify-content-center">
                                <label class="active me-1 mt-1" for="dateStandard">Check-out:</label>
                                <input type="date" id="CheckOutDate" onchange="checkout_fun();" name="CheckOut" value="<%= search[2] || '' %>" required>
                            </div>
                            <div class="col-lg-2 mt-2 d-flex justify-content-center">
                                <label class="active me-2 mt-1">Adulti:</label>
                                <div class="btn-group">
                                    <button type="button" id="lessBtnA" class="btn btn-light rounded-circle" onclick="lessBtnRangeA()">-</button>
                                    <input type="number" value="<%= search[3] || 1 %>" name="adulti" id="adulti" class="form-control-plaintext text-center" readonly style="width: 25pt;">
                                    <button type="button" id="moreBtnA" class="btn btn-light rounded-circle" onclick="moreBtnRangeA()">+</button>
                                </div>
                            </div>
                            <div class="col-lg-2 mt-2 d-flex justify-content-center">
                                <label class="active me-2 mt-1">Ragazzi:</label>
                                <div class="btn-group">
                                    <button type="button" id="lessBtnR" class="btn btn-light rounded-circle" onclick="lessBtnRangeR()">-</button>
                                    <input type="number" value="<%= search[4] || 0 %>" name="ragazzi" id="ragazzi" class="form-control-plaintext text-center" readonly style="width: 25pt;">
                                    <button type="button" id="moreBtnR" class="btn btn-light rounded-circle" onclick="moreBtnRangeR()">+</button>
                                </div>
                            </div>
                            
                            <div class="col-lg-2 mt-2 d-flex justify-content-center">
                                <button class="btn btn-primary rounded-3 fw-bold" onclick="validSearch()">Cerca hotels<i class="ms-2 bi bi-search"></i></button>
                            </div>
                        </form>

                    </nav>
                    <div class="row "id="ao">
                        <div id="map"></div>
                        <div id="panel"></div>
        
                      <div id="listing">
                        <table id="resultsTable">
                          <tbody id="results"></tbody>
                        </table>
                      </div>
                    
                      <div style="display: none">
                        <div id="info-content">
                          <table>
                          
                            <tr id="iw-url-row" class="iw_table_row">
                              <td id="iw-icon" class="iw_table_icon"></td>
                              <td id="iw-url"></td>
                            </tr>
                            <tr id="iw-address-row" class="iw_table_row">
                              <td class="iw_attribute_name">Indirizzo:</td>
                              <td id="iw-address"></td>
                            </tr>
                            <tr id="iw-phone-row" class="iw_table_row">
                              <td class="iw_attribute_name">Telefono:</td>
                              <td id="iw-phone"></td>
                            </tr>
                            <tr id="iw-rating-row" class="iw_table_row">
                              <td class="iw_attribute_name">Recensioni:</td>
                              <td id="iw-rating"></td>
                            </tr>
                            <tr id="iw-website-row" class="iw_table_row">
                              <td class="iw_attribute_name">Sito Web:</td>
                              <td id="iw-website"></td>
                            </tr>
                          </table>
                        </div>
                      </div>
                    </div>

                    <div style="padding: 20pt;"></div>
                </div>
            </div>
        </div>
        <%- include('footer'); -%>
</body>
<script>
    window.history.pushState("", "<%=borgo.nome%>", "<%=borgo.nome%>");
    //window.location.href='/<%=borgo.nome%>';
    var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'))
    var popoverList = popoverTriggerList.map(function(popoverTriggerEl) {
        return new bootstrap.Popover(popoverTriggerEl)
    })



    //effetto scroll rallentato
    $(function() {

        $('a[href*="#"]:not([href="#"])').click(function() {

            if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {

                var target = $(this.hash);
                target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
                if (target.length) {

                    $('html,body').animate({

                        scrollTop: target.offset().top
                    }, 500);
                    return false;

                }


            }



        });




    });

    var modal = document.getElementById('myModal');

    // Get the image and insert it inside the modal - use its "alt" text as a caption
    var img = document.getElementById('myImg');
    var modalImg = document.getElementById("img01");
    var captionText = document.getElementById("caption");
    img.onclick = function() {
        modal.style.display = "block";
        modalImg.src = this.src;
        captionText.innerHTML = this.alt;
    }

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
        modal.style.display = "none";
    }
</script>

<script
src="https://maps.googleapis.com/maps/api/js?key=<%=maps_key%>&callback=initMap&libraries=places"
defer
></script>

</html>